<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tienda Brainrots</title>
  <meta name="description" content="Tienda Brainrots - Compra y vende brainrots de Steal a Brainrot. Envío rápido y soporte por WhatsApp." />

  <style>
    /* ---------- RESET / BASE ---------- */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,Arial,Helvetica,sans-serif;background:
      linear-gradient(135deg,#05060a 0%, #071227 40%, #051018 100%);
      color:#e9f6ff;min-height:100vh;display:flex;flex-direction:column}
    a{color:inherit;text-decoration:none}
    .container{max-width:1180px;margin:0 auto;padding:20px}

    /* ---------- HEADER ---------- */
    header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:rgba(255,255,255,0.02);border-bottom:1px solid rgba(255,255,255,0.03)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,#8c52ff,#06edf6);display:flex;align-items:center;justify-content:center;font-weight:800;color:#041018}
    nav{display:flex;gap:8px;align-items:center}
    .btn{background:linear-gradient(90deg,#ff3131,#ff914d);border:none;padding:8px 12px;border-radius:10px;color:#fff;cursor:pointer;font-weight:700}
    .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px;color:#dff3ff;cursor:pointer}

    /* ---------- HERO ---------- */
    .hero{display:flex;gap:20px;align-items:center;padding:26px 0}
    .hero-left{flex:1}
    .hero h1{font-size:clamp(1.6rem,3.6vw,2.4rem);margin-bottom:8px}
    .hero p{color:#cfeaff;opacity:0.95}
    .hero-right{width:300px;min-width:220px;background:linear-gradient(180deg,rgba(140,82,255,0.08),rgba(6,237,246,0.06));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.02)}

    /* ---------- GRID PRODUCTOS ---------- */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-top:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 28px rgba(2,6,23,0.6);display:flex;flex-direction:column;gap:10px;transition:transform .14s}
    .card:hover{transform:translateY(-6px)}
    .thumb{height:130px;border-radius:10px;background:linear-gradient(135deg,#8c52ff,#06edf6);display:flex;align-items:center;justify-content:center;font-weight:800;color:#041018}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:800;color:#fff}
    .seller{font-size:.85rem;color:#c7e3ff;opacity:.95}

    /* ---------- FORM VENDER MULTI-STEP ---------- */
    .panel{margin-top:28px;background:rgba(255,255,255,0.02);padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    .steps{display:flex;gap:8px;margin-bottom:12px}
    .step{flex:1;padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);text-align:center;font-weight:700}
    .step.active{background:linear-gradient(90deg,#8c52ff,#06edf6);color:#041018}

    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(2,6,18,0.6);color:#e6f4ff}
    textarea{min-height:80px;resize:vertical}

    /* ---------- FOOTER ---------- */
    footer{padding:18px;border-top:1px solid rgba(255,255,255,0.02);text-align:center;color:#bfe6ff;background:linear-gradient(90deg,rgba(255,255,255,0.01),transparent)}

    /* ---------- MODALS/RESPONSIVE ---------- */
    .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:999}
    .modal-backdrop.show{display:flex;background:rgba(0,0,0,0.6)}
    .modal{background:linear-gradient(180deg,#071223,#051227);padding:16px;border-radius:12px;color:#e6f4ff;width:100%;max-width:460px;border:1px solid rgba(255,255,255,0.03)}
    @media(max-width:720px){ .hero{flex-direction:column}.hero-right{width:100%} header{flex-direction:column;align-items:flex-start;gap:10px} }
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo">B</div>
        <div>
          <div style="font-weight:800">Tienda Brainrots</div>
          <div style="font-size:.85rem;color:#bfe6ff;opacity:.9">Los mejores brainrots — Entrega rápida</div>
        </div>
      </div>

      <nav>
        <button class="ghost" onclick="scrollToEl('products')">Brainrots</button>
        <button class="ghost" onclick="scrollToEl('vender')">Vender</button>
        <button class="btn" onclick="openLogin()">Iniciar sesión</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div class="hero-left">
        <h1>Compra y vende Brainrots — rápido y seguro</h1>
        <p>Publica tu brainrot en 5 pasos, únete al grupo de ventas por WhatsApp y recibe ofertas. Nosotros facilitamos la coordinación del pago y la entrega.</p>
        <div style="margin-top:12px;display:flex;gap:8px;">
          <button class="btn" onclick="scrollToEl('products')">Ver Brainrots</button>
          <a class="ghost" href="#REEMPLAZAR_WHATSAPP" target="_blank">Soporte / WhatsApp</a>
        </div>
      </div>

      <aside class="hero-right">
        <div style="font-weight:800;font-size:1.05rem;margin-bottom:8px">Por qué elegirnos</div>
        <ul style="padding-left:16px;color:#dff6ff">
          <li>Entrega instantánea (según disponibilidad)</li>
          <li>Soporte por WhatsApp</li>
          <li>Proceso paso a paso para vender</li>
        </ul>
      </aside>
    </section>

    <!-- PRODUCTOS -->
    <section id="products">
      <h2>Brainrots disponibles <small id="totalCount" style="color:#bfe6ff;font-weight:700;margin-left:8px"></small></h2>
      <div class="grid" id="productGrid" aria-live="polite">
        <!-- inyectado por JS -->
      </div>
    </section>

    <!-- VENDER: formulario multi-step -->
    <section id="vender" class="panel">
      <h3>Vender Brainrot</h3>
      <div class="steps" id="stepsHeader">
        <div class="step active" data-step="1">1. Seleccionar</div>
        <div class="step" data-step="2">2. Mutación / Rasgos</div>
        <div class="step" data-step="3">3. Confirmar</div>
        <div class="step" data-step="4">4. Contacto</div>
        <div class="step" data-step="5">5. Enviar</div>
      </div>

      <form id="sellForm" onsubmit="event.preventDefault(); nextStep();" style="margin-top:10px;">
        <div id="step1" class="stepPane">
          <label>Nombre del Brainrot</label>
          <input id="s_name" type="text" placeholder="Ej: Hotpotsitos" required>
          <label style="margin-top:8px">Tipo / Secret</label>
          <select id="s_secret">
            <option value="">Selecciona (Secret / Normal)</option>
            <option value="Secret">Secret</option>
            <option value="Normal">Normal</option>
          </select>
        </div>

        <div id="step2" class="stepPane" style="display:none;margin-top:8px;">
          <label>Mutación</label>
          <select id="s_mutation">
            <option value="Sin mutación">Sin mutación</option>
            <option value="Mutación A">Mutación A</option>
            <option value="Mutación B">Mutación B</option>
          </select>
          <label style="margin-top:8px">Rasgos (opcional)</label>
          <input id="s_traits" type="text" placeholder="Ej: Rasgo1, Rasgo2">
        </div>

        <div id="step3" class="stepPane" style="display:none;margin-top:8px;">
          <label>Precio (Robux)</label>
          <input id="s_price" type="number" min="0" placeholder="100">
          <label style="margin-top:8px">Link en Roblox (opcional)</label>
          <input id="s_link" type="text" placeholder="https://www.roblox.com/...">
        </div>

        <div id="step4" class="stepPane" style="display:none;margin-top:8px;">
          <label>País / Prefijo</label>
          <select id="s_country">
            <option value="+51">Perú (+51)</option>
            <option value="+52">México (+52)</option>
            <option value="+1">Estados Unidos (+1)</option>
            <option value="+34">España (+34)</option>
            <!-- agregar más si quieres -->
          </select>
          <label style="margin-top:8px">WhatsApp o contacto</label>
          <input id="s_contact" type="text" placeholder="Ej: +51XXXXXXXX / usuarioRoblox">
        </div>

        <div id="step5" class="stepPane" style="display:none;margin-top:8px;">
          <p style="color:#cfefff">Revisa y confirma tu publicación. Para enviar tu solicitud debes unirte al grupo de WhatsApp.</p>
          <p><a href="#REEMPLAZAR_WHATSAPP" target="_blank" class="ghost">Unirme al grupo WhatsApp</a></p>
        </div>

        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px;">
          <button type="button" class="ghost" onclick="prevStep()">Atrás</button>
          <button type="submit" class="btn" id="nextBtn">Siguiente</button>
        </div>
      </form>
      <small style="display:block;margin-top:10px;color:#bfe6ff">Tu publicación se guarda localmente. Para una publicación en línea real podemos conectar Firebase o un backend.</small>
    </section>
  </main>

  <footer>
    <div class="container">
      © <span id="fYear"></span> Tienda Brainrots — Soporte por WhatsApp · Términos · Privacidad
    </div>
  </footer>

  <!-- MODALES -->
  <div id="modalLogin" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="modal">
      <h3>Iniciar sesión</h3>
      <p style="color:#bfe6ff">Inicia sesión (simulado). Al iniciar sesión podrás marcar compras.</p>
      <input id="loginUser" type="text" placeholder="Usuario">
      <input id="loginPass" style="margin-top:8px" type="password" placeholder="Contraseña">
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
        <button class="ghost" onclick="closeLogin()">Cancelar</button>
        <button class="btn" onclick="doFakeLogin()">Iniciar</button>
      </div>
    </div>
  </div>

  <script>
    /* ---------- DATOS INICIALES ---------- */
    const initial = [
      { id: idGen(), name: "Hotpotsitos", price: 100, link: "", seller: "Vendedor1", created: Date.now() },
      { id: idGen(), name: "La grande combinación", price: 150, link: "", seller: "Vendedor2", created: Date.now() },
      { id: idGen(), name: "Favorita bicicleta", price: 200, link: "", seller: "Vendedor3", created: Date.now() }
    ];

    function idGen(){ return 'i'+Math.random().toString(36).slice(2,9) }

    /* ---------- localStorage helpers ---------- */
    function load(){ try{ const r = localStorage.getItem('brainrots_store'); if(!r){ localStorage.setItem('brainrots_store', JSON.stringify(initial)); return initial } return JSON.parse(r)}catch(e){ localStorage.setItem('brainrots_store', JSON.stringify(initial)); return initial } }
    function save(list){ localStorage.setItem('brainrots_store', JSON.stringify(list)) }

    /* ---------- RENDER PRODUCTOS ---------- */
    function render(){
      const grid = document.getElementById('productGrid'); grid.innerHTML='';
      const list = load().sort((a,b)=> b.created - a.created);
      document.getElementById('totalCount').textContent = `(${list.length})`;
      for(const p of list){
        const div = document.createElement('div'); div.className='card';
        div.innerHTML = `
          <div class="thumb">${esc(p.name)}</div>
          <div>
            <div class="meta"><div style="font-weight:800">${esc(p.name)}</div><div class="price">${p.price} Robux</div></div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="seller">Vendedor: ${esc(p.seller||'Anónimo')}</div>
              <div style="display:flex;gap:8px">
                <button class="ghost" onclick="view('${p.id}')">Detalles</button>
                <button class="btn" onclick="onBuy('${p.id}')">Comprar</button>
              </div>
            </div>
            <div style="margin-top:8px;color:#bfe6ff;font-size:.9rem">
              ${p.link ? `<a href="${attr(p.link)}" target="_blank">Ver en Roblox</a>` : ''}
            </div>
          </div>
        `;
        grid.appendChild(div);
      }
    }

    function esc(s){ return (s||'').toString().replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }
    function attr(s){ return s ? s.replace(/"/g,'&quot;') : '' }

    /* ---------- FORM STEPS ---------- */
    let curStep = 1;
    function showStep(n){
      curStep = n;
      for(let i=1;i<=5;i++){
        document.getElementById('step'+i).style.display = (i===n?'block':'none');
        const el = document.querySelector('.step[data-step="'+i+'"]');
        if(el) el.classList.toggle('active', i===n);
      }
      document.getElementById('nextBtn').textContent = (n<5? 'Siguiente' : 'Enviar solicitud');
    }
    function nextStep(){
      if(curStep < 5){
        showStep(curStep+1);
      } else {
        // enviar publicación: guardar en localStorage
        const name = document.getElementById('s_name').value.trim();
        const price = parseInt(document.getElementById('s_price').value) || 0;
        const link = document.getElementById('s_link').value.trim();
        const contact = (document.getElementById('s_contact').value || 'Sin contacto').trim();
        if(!name){ alert('Ingresa nombre del brainrot'); showStep(1); return; }
        const list = load();
        list.push({ id: idGen(), name, price, link, seller: contact, created: Date.now() });
        save(list); render();
        alert('Solicitud enviada. Unete al grupo de WhatsApp para coordinar la venta.');
        // limpiar form
        document.getElementById('sellForm').reset();
        showStep(1);
      }
    }
    function prevStep(){ if(curStep>1) showStep(curStep-1) }
    showStep(1);

    /* ---------- BUY / LOGIN (simulado) ---------- */
    let pendingBuy = null;
    function onBuy(id){
      pendingBuy = id;
      openLogin();
    }
    function openLogin(){
      const m = document.getElementById('modalLogin'); m.classList.add('show'); m.setAttribute('aria-hidden','false');
    }
    function closeLogin(){ const m=document.getElementById('modalLogin'); m.classList.remove('show'); m.setAttribute('aria-hidden','true') }
    function doFakeLogin(){ closeLogin(); if(pendingBuy){ showPurchaseModal(); } else alert('Sesión iniciada (simulada)') }

    function view(id){ const p = load().find(x=>x.id===id); if(!p) return alert('No encontrado'); alert(`${p.name}\nPrecio: ${p.price} Robux\nVendedor: ${p.seller}\nLink: ${p.link||'No disponible'}`) }

    function showPurchaseModal(){
      const p = load().find(x=>x.id===pendingBuy);
      if(!p) return alert('Error');
      const confirmed = confirm(`Comprar ${p.name} por ${p.price} Robux?\n\nNota: este es un flujo simulado. Coordina con el vendedor por WhatsApp antes de pagar.`);
      if(confirmed){
        alert(`Compra simulada confirmada.\nContacta a ${p.seller} para coordinar la entrega.`);
        pendingBuy = null;
      }
    }

    /* ---------- UTILS ---------- */
    function scrollToEl(id){ document.getElementById(id).scrollIntoView({behavior:'smooth'}) }
    document.getElementById('fYear').textContent = new Date().getFullYear();

    /* init */
    render();
  </script>
</body>
</html>
